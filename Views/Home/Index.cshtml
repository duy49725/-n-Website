@model IEnumerable<DoAnWebNangCao.Models.Book>
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_LayoutClient.cshtml";
    var discountedBooks = Model
               .Where(b => b.Discount != null && b.Discount.IsActive);
}
<section id="hero">
    <h4>Trade-in-offer</h4>
    <h2>Super value deals</h2>
    <h1>On all products</h1>
    <p>Save more with coupons & up to 70% off!</p>
    <button>Shop Now</button>
</section>
<section id="feature" class="section-p1">
    <div class="fe-box">
        <img src="../img/features/f1.png" alt="">
        <h6>Free Shipping</h6>
    </div>
    <div class="fe-box">
        <img src="../img/features/f2.png" alt="">
        <h6>Online Order</h6>
    </div>
    <div class="fe-box">
        <img src="../img/features/f3.png" alt="">
        <h6>Save Money</h6>
    </div>
    <div class="fe-box">
        <img src="../img/features/f4.png" alt="">
        <h6>Promotions</h6>
    </div>
    <div class="fe-box">
        <img src="../img/features/f5.png" alt="">
        <h6>Happy Sell</h6>
    </div>
    <div class="fe-box">
        <img src="../img/features/f6.png" alt="">
        <h6>24/7 Support</h6>
    </div>
</section>
<div class="Search-Form">
    <form asp-action="Index" class="row row-cols-lg-auto g-3 align-items-center">
        <label class="Search-Home" for="sterm">Search by title:</label>
        <input type="text" class="form-control"  id="sterm" name="sterm" placeholder="Search by title" />
        <div class="Search-Form-button">
            <button type="submit" class="normal">Search</button>
            <a href="/Home/Index" class="normal">Reset</a>
        </div>
    </form>
</div>


<section id="product1" class="section-p1">
    <h1>Discounted Books</h1>
    <div class="pro-container">
        @foreach (var book in discountedBooks)
        {
            <a class="btn btn-secondary btn-sm" asp-action="Detail" asp-route-id="@book.Id">
                <div class="pro" onclick="redirectToDetail(@book.Id)">
                    <img style="width:100%;height:200px" src="/Uploads/@book.Image" alt="...">
                    <div class="des">
                        <span style="text-decoration: none">Tên Sách: @book.BookName</span>
                        <div class="rating">
                            @for (int i = 0; i < book.AverageRating; i++)
                            {
                                <i class="fas fa-star"></i>
                            }
                        </div>
                        <h4>Giá: @book.Price</h4>
                        <h4>Giam Gia: @book.DiscountPercentage %</h4>
                        <h4>Giá sau giam: @(book.Price - (book.DiscountPercentage * book.Price) / 100)</h4>
                    </div>
                    <a href="#" class="cart" onclick="add(@book.Id)"><i class="fa-solid fa-cart-arrow-down"></i></a>
                </div>
            </a>
        }
    </div>
</section>

<section id="product1" class="section-p1">
    <h2>Featured Products</h2>
    <p>Summer Collection New Mordern Design</p>
    <div class="pro-container">
        @foreach (var book in Model)
        {
            <a class="btn btn-secondary btn-sm" asp-action="Detail" asp-route-id="@book.Id">
                <div class="pro" onclick="redirectToDetail(@book.Id)">
                    <img style="width:100%;height:200px" src="/Uploads/@book.Image" alt="...">
                    <div class="des">
                        <span style="text-decoration: none">Tên Sách: @book.BookName</span>
                        <div class="rating">
                            @for (int i = 0; i < book.AverageRating; i++)
                            {
                                <i class="fas fa-star"></i>
                            }
                        </div>
                        <h4>Giá: @book.Price</h4>
                    </div>
                    <a href="#" class="cart" onclick="add(@book.Id)"><i class="fa-solid fa-cart-arrow-down"></i></a>
                </div>
            </a>
        }
    </div>
</section>
<section id="sm-banner" class="section-p1">
    <div class="banner-box">
        <h4>crazy deals</h4>
        <h2>buy 1 get 1 free</h2>
        <span>The best classic dress is on sale at cara</span>
        <button class="white">Learn More</button>
    </div>
    <div class="banner-box banner-box2">
        <h4>spring/summer</h4>
        <h2>upcomming season</h2>
        <span>The best classic dress is on sale at cara</span>
        <button class="white">Collection</button>
    </div>
</section>

<section id="banner3">
    <div class="banner-box">
        <h2>SEASONAL SALE</h2>
        <h3>Winter Collection -50% OFF</h3>
    </div>
    <div class="banner-box banner-box2">
        <h2>NEW FOOTWEAR COLLECTION</h2>
        <h3>spring/summer</h3>
    </div>
    <div class="banner-box banner-box3">
        <h2>T-Shirt</h2>
        <h3>Winter Collection -50% OFF</h3>
    </div>
</section>
@section Scripts{
    <script>
        async function add(bookId) {
            var usernameEl = document.getElementById("username");
            if (usernameEl == null) {
                window.location.href = "/Identity/Account/Login";
                //var username=usernameEl.innerText;
                //  if(username.length<1){
                //      window.location.href="/Identity/Account/Login";
                //  }
            }
            try {
                var response = await fetch(`/Cart/AddItem?bookId=${bookId}`);
                console.log(bookId)
                if (response.status == 200) {
                    var result = await response.json();
                    var cartCountEl = document.getElementById("cartCount");
                    cartCountEl.innerHTML = result;
                    window.location.href = "#cartCount";
                }
            }
            catch (err) {
                console.log(err);
            }
        }
    </script>
}
<style>
    .Search-Form {
        margin: 0px;
        background-color: #0056b3;
        height: 8rem;
    }

    .Search-Form form {
        display: flex;
        padding-top: 40px;
        justify-content: center;
    }

    .Search-Form form label {
        padding-top:10px;
        margin-right: 10px;
        color: #fff;
    }

    .Search-Form form input {
        height: 2.8rem; /* Độ cao của input */
        padding: 0 1.25rem; /* Khoảng cách từ nội dung đến viền input */
        font-size: 14px;
        width: 500px; /* Độ rộng của input */
        border: 1px solid gray;
        border-radius: 4px;
        outline: none;
    }

    .Search-Form-button {
        display: flex;
        align-items: center;
    }

    /* Thêm CSS để tạo style cho button "Search" và "Reset" */
    .Search-Form-button button,
    .Search-Form-button a {
        display: inline-block;
        margin-left: 10px; /* Khoảng cách giữa nút "Search" và "Reset" */
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .Search-Form-button button.normal,
    .Search-Form-button a.normal {
        background-color: #088178; /* Màu nền cho nút "Search" và "Reset" */
        color: white;
    }

    .Search-Form-button button.normal:hover,
    .Search-Form-button a.normal:hover {
        background-color: #088178; /* Màu nền khi hover */
    }

</style>